<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Booha 50 ‚Äì January Week 1</title>
<meta name="theme-color" content="#0b1530">
<link rel="icon" type="image/png" href="booha-ghost.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&display=swap" rel="stylesheet" />
<style>
:root{
  --radius:28px;
  --ink:#111; --paper:#ffffffee;
  --pink:#ff7eb9; --blue:#5ee6ff; --yellow:#fff680; --green:#8aff80; --purple:#c77dff;
  --deep:#0b1530; --deep2:#0f172a;
  --glow:#7c3aed;
}

/* Base */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  background: radial-gradient(1200px 800px at 50% -10%, #1e2a55 0%, #0f1a3d 40%, #0b1530 100%);
  color:#fff;
  font-family:system-ui,Segoe UI,Roboto,Inter,sans-serif;
}
.wrapper{
  min-height:100%;
  display:flex;flex-direction:column;
  align-items:center;justify-content:flex-start;
  gap:10px;
  padding:18px 10px 60px;
}

/* Header */
header{text-align:center}
header h1{
  font-family:'Cinzel',serif;font-weight:900;
  font-size:clamp(28px,5vw,56px);letter-spacing:.5px
}
header h2{
  opacity:.95;font-size:clamp(16px,2.6vw,22px);margin-top:4px
}
.back{
  position:fixed;left:10px;top:10px;
  color:#fff;text-decoration:none;font-weight:800;
  padding:10px 14px;border-radius:999px;border:1px solid #2f3b7a;
  background:#0c1440;box-shadow:0 0 18px rgba(124,58,237,.15), inset 0 0 8px rgba(255,255,255,.05);
  transition:transform .15s ease;
}
.back:hover{transform:translateY(-1px)}

/* Tabs (‚ë†‚Äì‚ë£) */
.modes{
  display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin:12px 0 6px
}
.modes button{
  position:relative;
  background:#0d1b4a;border:1px solid #2b3f8a;color:#e6e9ff;
  border-radius:14px;padding:10px 14px;font-weight:900;cursor:pointer;
  text-shadow:0 1px 0 rgba(0,0,0,.3);
  box-shadow:
    0 8px 22px rgba(0,0,0,.35),
    0 0 18px rgba(124,58,237,.25);
  transition:transform .12s ease, filter .12s ease, background .12s ease, color .12s ease, border-color .12s ease;
}
.modes button::after{
  content:""; position:absolute; inset:-2px;
  border-radius:16px; pointer-events:none;
  box-shadow:0 0 14px rgba(124,58,237,.45), 0 0 22px rgba(94,230,255,.25);
}
.modes button:hover{transform:translateY(-1px);filter:brightness(1.05)}
/* Active color by NUMBER (not position) */
.modes button.active[data-num="1"]{background:var(--pink); color:#3a0630; border-color:var(--pink); box-shadow:0 8px 28px rgba(255,126,185,.35), 0 0 22px rgba(255,126,185,.55)}
.modes button.active[data-num="2"]{background:var(--green);color:#062614;border-color:var(--green);box-shadow:0 8px 28px rgba(56,232,148,.35), 0 0 22px rgba(56,232,148,.55)}
.modes button.active[data-num="3"]{background:var(--yellow);color:#3a3206;border-color:var(--yellow);box-shadow:0 8px 28px rgba(255,246,128,.35), 0 0 22px rgba(255,246,128,.55)}
.modes button.active[data-num="4"]{background:var(--purple);color:#1f0b2c;border-color:var(--purple);box-shadow:0 8px 28px rgba(199,125,255,.35), 0 0 22px rgba(199,125,255,.55)}

/* Stage + Card */
.stage{display:flex;flex-direction:column;align-items:center;gap:18px;padding:6px 12px;width:100%}
.card-outer{width:min(92vw,900px);aspect-ratio:3/2;perspective:1500px;display:flex;align-items:center;justify-content:center}
.card{
  position:relative;width:100%;height:100%;border-radius:var(--radius);
  transform-style:preserve-3d;transition:transform .7s cubic-bezier(.2,.8,.2,1);
  box-shadow:0 35px 90px rgba(0,0,0,.55);
  border:3px solid rgba(255,255,255,.18);

  /* Barber pole ‚Äî single continuous scroll */
  background-repeat:repeat;
  background-size:400% 400%;
  animation:stripeMove 10s linear infinite;
  will-change:background-position;
}
@keyframes stripeMove{from{background-position:0 0}to{background-position:400% 400%}}

.card.is-back{transform:rotateY(180deg)}
.face{
  position:absolute;inset:0;border-radius:var(--radius);backface-visibility:hidden;
  display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;
  padding:1.1rem;background:var(--paper);color:var(--ink)
}
.face.back{transform:rotateY(180deg)}
.term h2{
  font-size:clamp(30px,4.2vw,52px);
  font-weight:900;line-height:1.22;letter-spacing:.2px;
}
.term p{
  margin-top:.65rem;font-size:clamp(18px,2.6vw,28px);opacity:.95
}

/* Controls + Glow Buttons */
.controls{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.btn{
  padding:12px 16px;border-radius:14px;border:1px solid #e5e7eb;background:linear-gradient(180deg,#fff,#eaeaea);
  font-weight:900;cursor:pointer;color:#111;
  box-shadow:
    0 12px 28px rgba(0,0,0,.28),
    0 0 14px rgba(124,58,237,.25);
  transition:transform .12s ease, filter .12s ease;
}
.btn:hover{transform:translateY(-1px);filter:brightness(1.03)}
.btn.glow{position:relative}
.btn.glow::after{
  content:""; position:absolute; inset:-2px; border-radius:16px; pointer-events:none;
  box-shadow:0 0 14px rgba(124,58,237,.45), 0 0 22px rgba(94,230,255,.25), 0 0 10px rgba(255,246,128,.25);
}

/* Quiz */
.quiz-wrap{width:min(94vw,900px);background:#0b1030;border:1px solid #2a3575;border-radius:18px;padding:16px;
  box-shadow:0 24px 70px rgba(0,0,0,.45), 0 0 24px rgba(124,58,237,.15)}
.qtop{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.qprog,.score{font-weight:900}
.q{background:#0f1544;border:1px solid #2a3575;border-radius:14px;padding:16px}
.q h3{font-size:clamp(20px,2.8vw,26px);margin-bottom:10px}
.opts{display:grid;grid-template-columns:1fr;gap:12px;margin:12px 0}
.opt{
  background:#0d133a;border:1px solid #2a3575;border-radius:12px;padding:12px;cursor:pointer;font-weight:800;color:#e9ecff;
  box-shadow:0 8px 22px rgba(0,0,0,.35), 0 0 14px rgba(124,58,237,.25);
  transition:transform .08s ease, filter .08s ease, background .1s, border-color .1s;
}
.opt:hover{transform:translateY(-1px);filter:brightness(1.06)}
.opt.correct{border-color:#22c55e;background:#0f2a1a;box-shadow:0 0 18px rgba(34,197,94,.45)}
.opt.wrong{border-color:#ef4444;background:#2a1111;box-shadow:0 0 18px rgba(239,68,68,.35)}
.explain{margin-top:10px;color:#d7ddff}
.qnav{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}

.hidden{display:none}

/* Small */
@media (max-width:520px){
  .term h2{font-size:clamp(26px,6.2vw,38px)}
  .term p{font-size:clamp(16px,4.4vw,22px)}
}
</style>
</head>
<body>
<a class="back" href="index.html">‚üµ Back to Menu</a>
<div class="wrapper">
  <header>
    <h1>January Week 1 ‚Äì 50 Deck Ôºè ÔºëÊúàÁ¨¨ÔºëÈÄ±Ôºö50„Éá„ÉÉ„ÇØ</h1>
    <h2>New Beginnings & Goals Ôºè Êñ∞„Åó„ÅÑÂßã„Åæ„Çä„Å®ÁõÆÊ®ô</h2>
  </header>

  <div class="modes" id="modes"></div>

  <!-- Cards Stage -->
  <section class="stage" id="cardsStage">
    <div class="card-outer">
      <article class="card" id="card">
        <div class="face front">
          <div class="term">
            <h2 id="frontTitle"></h2>
            <p id="frontSub"></p>
          </div>
        </div>
        <div class="face back">
          <div class="term">
            <h2 id="backTitle"></h2>
            <p id="backSub"></p>
          </div>
        </div>
      </article>
    </div>
    <div class="controls">
      <button class="btn glow" id="prevBtn">‚ùÆ Prev</button>
      <button class="btn glow" id="flipBtn">Flip ‚§æ</button>
      <button class="btn glow" id="nextBtn">Next ‚ùØ</button>
    </div>
  </section>

  <!-- Quiz Stage -->
  <section class="stage hidden" id="quizStage">
    <div class="quiz-wrap">
      <div class="qtop">
        <div class="qprog" id="qprog">1 / 20</div>
        <div class="score" id="score">Score: 0</div>
      </div>
      <div class="q" id="qbox">
        <h3 id="qtext"></h3>
        <div class="opts" id="opts"></div>
        <div class="explain" id="explain"></div>
        <div class="qnav">
          <button class="btn glow" id="nextQ">Next ‚ùØ</button>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
// ---------- UTIL: Barber stripes + Confetti ----------
function stripes(a,b,c){
  return `repeating-linear-gradient(45deg,
    ${a} 0%, ${a} 3%,
    ${b} 3%, ${b} 6%,
    ${c} 6%, ${c} 9%)`;
}

// Minimal confetti burst from a button element
function burstConfettiFrom(el){
  const colors = ['#5ee6ff','#ff7eb9','#8aff80','#fff680','#c77dff'];
  const rect = el.getBoundingClientRect();
  const container = document.createElement('div');
  container.style.position='fixed';
  container.style.left = (rect.left + rect.width/2) + 'px';
  container.style.top  = (rect.top + rect.height/2) + 'px';
  container.style.pointerEvents='none';
  container.style.width='0'; container.style.height='0';
  document.body.appendChild(container);

  const pieces = 24;
  for(let i=0;i<pieces;i++){
    const p = document.createElement('div');
    const size = 6 + Math.random()*6;
    const ang = Math.random()*2*Math.PI;
    const dist = 40 + Math.random()*60;
    const dx = Math.cos(ang)*dist;
    const dy = Math.sin(ang)*dist - (20+Math.random()*30);
    p.style.position='absolute';
    p.style.width=size+'px'; p.style.height=size+'px';
    p.style.background=colors[i%colors.length];
    p.style.borderRadius='2px';
    p.style.transform=`translate(0,0) rotate(${Math.random()*360}deg)`;
    p.style.opacity='1';
    p.style.transition='transform .6s ease-out, opacity .6s ease-out';
    container.appendChild(p);
    requestAnimationFrame(()=>{
      p.style.transform=`translate(${dx}px, ${dy}px) rotate(${(Math.random()*360)+180}deg)`;
      p.style.opacity='0';
    });
  }
  setTimeout(()=>container.remove(), 700);
}

// ---------- CONTENT ----------
const VOCAB = [
  {en:"goal", jp:"ÁõÆÊ®ô", hira:"„ÇÇ„Åè„Å≤„Çá„ÅÜ", stripes:[ "#ff7eb9","#5ee6ff","#fff680" ]},
  {en:"plan", jp:"Ë®àÁîª", hira:"„Åë„ÅÑ„Åã„Åè", stripes:[ "#5ee6ff","#fff680","#c77dff" ]},
  {en:"resolution", jp:"Ê±∫ÊÑè", hira:"„Åë„Å§„ÅÑ", stripes:[ "#fff680","#8aff80","#5ee6ff" ]},
  {en:"habit", jp:"ÁøíÊÖ£", hira:"„Åó„ÇÖ„ÅÜ„Åã„Çì", stripes:[ "#8aff80","#ff7eb9","#c77dff" ]},
  {en:"routine", jp:"Êó•Ë™≤", hira:"„Å´„Å£„Åã", stripes:[ "#5ee6ff","#ff7eb9","#fff680" ]},
  {en:"schedule", jp:"‰∫àÂÆö", hira:"„Çà„Å¶„ÅÑ", stripes:[ "#c77dff","#5ee6ff","#8aff80" ]},
  {en:"deadline", jp:"Á∑†„ÇÅÂàá„Çä", hira:"„Åó„ÇÅ„Åç„Çä", stripes:[ "#fff680","#c77dff","#5ee6ff" ]},
  {en:"progress", jp:"ÈÄ≤Ê≠©", hira:"„Åó„Çì„ÅΩ", stripes:[ "#8aff80","#fff680","#5ee6ff" ]},
  {en:"effort", jp:"Âä™Âäõ", hira:"„Å©„Çä„Çá„Åè", stripes:[ "#ff7eb9","#8aff80","#fff680" ]},
  {en:"focus", jp:"ÈõÜ‰∏≠", hira:"„Åó„ÇÖ„ÅÜ„Å°„ÇÖ„ÅÜ", stripes:[ "#5ee6ff","#c77dff","#fff680" ]},
  {en:"motivation", jp:"„ÇÑ„ÇãÊ∞ó", hira:"„ÇÑ„Çã„Åç", stripes:[ "#8aff80","#5ee6ff","#ff7eb9" ]},
  {en:"challenge", jp:"ÊåëÊà¶", hira:"„Å°„Çá„ÅÜ„Åõ„Çì", stripes:[ "#c77dff","#fff680","#5ee6ff" ]},
  {en:"success", jp:"ÊàêÂäü", hira:"„Åõ„ÅÑ„Åì„ÅÜ", stripes:[ "#5ee6ff","#8aff80","#ff7eb9" ]},
  {en:"mistake", jp:"ÈñìÈÅï„ÅÑ", hira:"„Åæ„Å°„Åå„ÅÑ", stripes:[ "#fff680","#ff7eb9","#8aff80" ]},
  {en:"improve", jp:"‰∏äÈÅî„Åô„Çã", hira:"„Åò„Çá„ÅÜ„Åü„Å§ „Åô„Çã", stripes:[ "#5ee6ff","#8aff80","#c77dff" ]},
  {en:"practice", jp:"Á∑¥Áøí", hira:"„Çå„Çì„Åó„ÇÖ„ÅÜ", stripes:[ "#ff7eb9","#fff680","#5ee6ff" ]},
  {en:"exercise", jp:"ÈÅãÂãï", hira:"„ÅÜ„Çì„Å©„ÅÜ", stripes:[ "#8aff80","#5ee6ff","#fff680" ]},
  {en:"study", jp:"ÂãâÂº∑", hira:"„Åπ„Çì„Åç„Çá„ÅÜ", stripes:[ "#c77dff","#5ee6ff","#8aff80" ]},
  {en:"promise", jp:"Á¥ÑÊùü", hira:"„ÇÑ„Åè„Åù„Åè", stripes:[ "#fff680","#5ee6ff","#ff7eb9" ]},
  {en:"reward", jp:"„Åî„Åª„ÅÜ„Å≥", hira:"„Åî„Åª„ÅÜ„Å≥", stripes:[ "#5ee6ff","#fff680","#8aff80" ]}
];

const SENTENCES = [
  {en:"I will study every day.", jp:"ÊØéÊó•ÂãâÂº∑„Åó„Åæ„Åô„ÄÇ", hira:"„Åæ„ÅÑ„Å´„Å° „Åπ„Çì„Åç„Çá„ÅÜ „Åó„Åæ„Åô", stripes:[ "#ff7eb9","#5ee6ff","#fff680" ]},
  {en:"I‚Äôm going to try something new.", jp:"Êñ∞„Åó„ÅÑ„Åì„Å®„Å´ÊåëÊà¶„Åó„Åæ„Åô„ÄÇ", hira:"„ÅÇ„Åü„Çâ„Åó„ÅÑ „Åì„Å® „Å´ „Å°„Çá„ÅÜ„Åõ„Çì „Åó„Åæ„Åô", stripes:[ "#5ee6ff","#fff680","#c77dff" ]},
  {en:"I will do my best this year.", jp:"‰ªäÂπ¥„ÅØÂÖ®Âäõ„ÇíÂ∞Ω„Åè„Åó„Åæ„Åô„ÄÇ", hira:"„Åì„Å®„Åó „ÅØ „Åú„Çì„Çä„Çá„Åè „Çí „Å§„Åè„Åó „Åæ„Åô", stripes:[ "#fff680","#8aff80","#5ee6ff" ]},
  {en:"I will make a new friend.", jp:"Êñ∞„Åó„ÅÑÂèã„Å†„Å°„Çí‰Ωú„Çä„Åæ„Åô„ÄÇ", hira:"„ÅÇ„Åü„Çâ„Åó„ÅÑ „Å®„ÇÇ„Å†„Å° „Çí „Å§„Åè„Çä „Åæ„Åô", stripes:[ "#8aff80","#ff7eb9","#fff680" ]},
  {en:"I will not be late anymore.", jp:"„ÇÇ„ÅÜÈÅÖÂàª„Åó„Åæ„Åõ„Çì„ÄÇ", hira:"„ÇÇ„ÅÜ „Å°„Åì„Åè „Åó„Åæ„Åõ„Çì", stripes:[ "#ff7eb9","#5ee6ff","#fff680" ]},
  {en:"I will help my classmates.", jp:"„ÇØ„É©„Çπ„É°„Ç§„Éà„ÇíÊâã‰ºù„ÅÑ„Åæ„Åô„ÄÇ", hira:"„ÇØ„É©„Çπ„É°„Ç§„Éà „Çí „Å¶„Å§„Å†„ÅÑ „Åæ„Åô", stripes:[ "#fff680","#8aff80","#c77dff" ]},
  {en:"I will clean my desk today.", jp:"‰ªäÊó•„ÅØÊú∫„ÇíÁâá„Å•„Åë„Åæ„Åô„ÄÇ", hira:"„Åç„Çá„ÅÜ „ÅØ „Å§„Åè„Åà „Çí „Åã„Åü„Å•„Åë „Åæ„Åô", stripes:[ "#5ee6ff","#fff680","#ff7eb9" ]},
  {en:"I will read more books.", jp:"„ÇÇ„Å£„Å®Êú¨„ÇíË™≠„Åø„Åæ„Åô„ÄÇ", hira:"„ÇÇ„Å£„Å® „Åª„Çì „Çí „Çà„Åø „Åæ„Åô", stripes:[ "#fff680","#5ee6ff","#8aff80" ]},
  {en:"I will start a good habit.", jp:"ËâØ„ÅÑÁøíÊÖ£„ÇíÂßã„ÇÅ„Åæ„Åô„ÄÇ", hira:"„Çà„ÅÑ „Åó„ÇÖ„ÅÜ„Åã„Çì „Çí „ÅØ„Åò„ÇÅ „Åæ„Åô", stripes:[ "#8aff80","#ff7eb9","#fff680" ]},
  {en:"I will speak more English.", jp:"„ÇÇ„Å£„Å®Ëã±Ë™û„ÇíË©±„Åó„Åæ„Åô„ÄÇ", hira:"„ÇÇ„Å£„Å® „Åà„ÅÑ„Åî „Çí „ÅØ„Å™„Åó „Åæ„Åô", stripes:[ "#fff680","#5ee6ff","#c77dff" ]},
  {en:"I will write in my diary every week.", jp:"ÊØéÈÄ±Êó•Ë®ò„ÇíÊõ∏„Åç„Åæ„Åô„ÄÇ", hira:"„Åæ„ÅÑ„Åó„ÇÖ„ÅÜ „Å´„Å£„Åç „Çí „Åã„Åç „Åæ„Åô", stripes:[ "#ff7eb9","#8aff80","#fff680" ]},
  {en:"I will wake up earlier.", jp:"„ÇÇ„Å£„Å®Êó©„ÅèËµ∑„Åç„Åæ„Åô„ÄÇ", hira:"„ÇÇ„Å£„Å® „ÅØ„ÇÑ„Åè „Åä„Åç „Åæ„Åô", stripes:[ "#5ee6ff","#fff680","#ff7eb9" ]},
  {en:"I will listen carefully in class.", jp:"ÊéàÊ•≠„Åß„Åó„Å£„Åã„ÇäËÅû„Åç„Åæ„Åô„ÄÇ", hira:"„Åò„ÇÖ„Åé„Çá„ÅÜ „Åß „Åó„Å£„Åã„Çä „Åç„Åç „Åæ„Åô", stripes:[ "#fff680","#8aff80","#5ee6ff" ]},
  {en:"I will smile more.", jp:"„ÇÇ„Å£„Å®Á¨ë„ÅÑ„Åæ„Åô„ÄÇ", hira:"„ÇÇ„Å£„Å® „Çè„Çâ„ÅÑ „Åæ„Åô", stripes:[ "#8aff80","#ff7eb9","#fff680" ]},
  {en:"I will enjoy learning.", jp:"Â≠¶„Å∂„Åì„Å®„ÇíÊ•Ω„Åó„Åø„Åæ„Åô„ÄÇ", hira:"„Åæ„Å™„Å∂ „Åì„Å® „Çí „Åü„ÅÆ„Åó„Åø „Åæ„Åô", stripes:[ "#5ee6ff","#fff680","#ff7eb9" ]},
  {en:"I‚Äôm going to join a club this semester.", jp:"‰ªäÂ≠¶Êúü„ÅØ„ÇØ„É©„Éñ„Å´ÂÖ•„Çã„Å§„ÇÇ„Çä„Åß„Åô„ÄÇ", hira:"„Åì„Çì„Åå„Å£„Åç „ÅØ „Åè„Çâ„Å∂ „Å´ „ÅØ„ÅÑ„Çã „Å§„ÇÇ„Çä „Åß„Åô", stripes:[ "#c77dff","#5ee6ff","#8aff80" ]},
  {en:"I‚Äôm meeting my friend to plan our goals.", jp:"Âèã„Å†„Å°„Å®ÁõÆÊ®ô„ÇíË®àÁîª„Åô„Çã„Åü„ÇÅ„Å´‰ºö„ÅÑ„Åæ„Åô„ÄÇ", hira:"„Å®„ÇÇ„Å†„Å° „Å® „ÇÇ„Åè„Å≤„Çá„ÅÜ „Çí „Åë„ÅÑ„Åã„Åè „Åô„Çã „Åü„ÇÅ „Å´ „ÅÇ„ÅÑ „Åæ„Åô", stripes:[ "#5ee6ff","#c77dff","#fff680" ]},
  {en:"By March, I will have read five books.", jp:"ÔºìÊúà„Åæ„Åß„Å´Êú¨„ÇíÔºïÂÜäË™≠„Çì„Åß„ÅÑ„Çã„Å§„ÇÇ„Çä„Åß„Åô„ÄÇ", hira:"„Åï„Çì„Åå„Å§ „Åæ„Åß „Å´ „Åª„Çì „Çí „Åî„Åï„Å§ „Çà„Çì„Åß „ÅÑ„Çã „Å§„ÇÇ„Çä „Åß„Åô", stripes:[ "#8aff80","#5ee6ff","#fff680" ]},
  {en:"I might start running on weekends.", jp:"ÈÄ±Êú´„Å´Ëµ∞„ÇäÂßã„ÇÅ„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ", hira:"„Åó„ÇÖ„ÅÜ„Åæ„Å§ „Å´ „ÅØ„Åó„Çä „ÅØ„Åò„ÇÅ„Çã „Åã„ÇÇ „Åó„Çå„Åæ„Åõ„Çì", stripes:[ "#ff7eb9","#c77dff","#5ee6ff" ]},
  {en:"I have decided to keep a study journal.", jp:"ÂãâÂº∑„Éé„Éº„Éà„ÇíÁ∂ö„Åë„Çã„Åì„Å®„Å´Ê±∫„ÇÅ„Åæ„Åó„Åü„ÄÇ", hira:"„Åπ„Çì„Åç„Çá„ÅÜ „ÅÆ„Éº„Å® „Çí „Å§„Å•„Åë„Çã „Åì„Å® „Å´ „Åç„ÇÅ „Åæ„Åó„Åü", stripes:[ "#fff680","#5ee6ff","#8aff80" ]}
];

const QUESTIONS = [
  {en:"What goal will you set this month?", jp:"‰ªäÊúà„ÅØ„Å©„Çì„Å™ÁõÆÊ®ô„ÇíÁ´ã„Å¶„Åæ„Åô„Åã„ÄÇ", hira:"„Åì„Çì„Åí„Å§ „ÅØ „Å©„Çì„Å™ „ÇÇ„Åè„Å≤„Çá„ÅÜ „Çí „Åü„Å¶ „Åæ„Åô „Åã", stripes:[ "#5ee6ff","#ff7eb9","#fff680" ]},
  {en:"Are you going to try something new this week?", jp:"‰ªäÈÄ±„ÄÅÊñ∞„Åó„ÅÑ„Åì„Å®„Å´ÊåëÊà¶„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åì„Çì„Åó„ÇÖ„ÅÜ „ÅÇ„Åü„Çâ„Åó„ÅÑ „Åì„Å® „Å´ „Å°„Çá„ÅÜ„Åõ„Çì „Åó„Åæ„Åô „Åã", stripes:[ "#8aff80","#5ee6ff","#c77dff" ]},
  {en:"When will you start your new habit?", jp:"Êñ∞„Åó„ÅÑÁøíÊÖ£„ÅØ„ÅÑ„Å§Âßã„ÇÅ„Åæ„Åô„Åã„ÄÇ", hira:"„ÅÇ„Åü„Çâ„Åó„ÅÑ „Åó„ÇÖ„ÅÜ„Åã„Çì „ÅØ „ÅÑ„Å§ „ÅØ„Åò„ÇÅ „Åæ„Åô „Åã", stripes:[ "#fff680","#5ee6ff","#8aff80" ]},
  {en:"How will you practice English every day?", jp:"ÊØéÊó•„Å©„ÅÜ„ÇÑ„Å£„Å¶Ëã±Ë™û„ÇíÁ∑¥Áøí„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åæ„ÅÑ„Å´„Å° „Å©„ÅÜ„ÇÑ„Å£„Å¶ „Åà„ÅÑ„Åî „Çí „Çå„Çì„Åó„ÇÖ„ÅÜ „Åó„Åæ„Åô „Åã", stripes:[ "#ff7eb9","#5ee6ff","#8aff80" ]},
  {en:"Who will help you reach your goal?", jp:"ÁõÆÊ®ô„ÇíÈÅîÊàê„Åô„Çã„ÅÆ„ÇíË™∞„ÅåÊâã‰ºù„ÅÑ„Åæ„Åô„Åã„ÄÇ", hira:"„ÇÇ„Åè„Å≤„Çá„ÅÜ „Çí „Åü„Å£„Åõ„ÅÑ „Åô„Çã „ÅÆ „Çí „Å†„Çå „Åå „Å¶„Å§„Å†„ÅÑ „Åæ„Åô „Åã", stripes:[ "#5ee6ff","#fff680","#c77dff" ]},
  {en:"What are you doing this weekend to improve yourself?", jp:"‰ªäÈÄ±Êú´„ÅØËá™ÂàÜ„Çí‰º∏„Å∞„Åô„Åü„ÇÅ„Å´‰Ωï„Çí„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åì„Çì„Åó„ÇÖ„ÅÜ„Åæ„Å§ „ÅØ „Åò„Å∂„Çì „Çí „ÅÆ„Å∞„Åô „Åü„ÇÅ „Å´ „Å™„Å´ „Çí „Åó„Åæ„Åô „Åã", stripes:[ "#8aff80","#ff7eb9","#5ee6ff" ]},
  {en:"Where will you study after school today?", jp:"‰ªäÊó•ÊîæË™≤Âæå„ÅØ„Å©„Åì„ÅßÂãâÂº∑„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åç„Çá„ÅÜ „Åª„ÅÜ„Åã„Åî „ÅØ „Å©„Åì „Åß „Åπ„Çì„Åç„Çá„ÅÜ „Åó„Åæ„Åô „Åã", stripes:[ "#fff680","#8aff80","#5ee6ff" ]},
  {en:"Why did you choose that goal?", jp:"„Å™„Åú„Åù„ÅÆÁõÆÊ®ô„ÇíÈÅ∏„Å≥„Åæ„Åó„Åü„Åã„ÄÇ", hira:"„Å™„Åú „Åù„ÅÆ „ÇÇ„Åè„Å≤„Çá„ÅÜ „Çí „Åà„Çâ„Å≥ „Åæ„Åó„Åü „Åã", stripes:[ "#5ee6ff","#ff7eb9","#8aff80" ]},
  {en:"How many books will you read this year?", jp:"‰ªäÂπ¥„ÅØÊú¨„Çí‰ΩïÂÜäË™≠„Åø„Åæ„Åô„Åã„ÄÇ", hira:"„Åì„Å®„Åó „ÅØ „Åª„Çì „Çí „Å™„Çì„Åï„Å§ „Çà„Åø „Åæ„Åô „Åã", stripes:[ "#c77dff","#fff680","#5ee6ff" ]},
  {en:"What will you stop doing to save time?", jp:"ÊôÇÈñì„ÇíÁØÄÁ¥Ñ„Åô„Çã„Åü„ÇÅ„Å´‰Ωï„Çí„ÇÑ„ÇÅ„Åæ„Åô„Åã„ÄÇ", hira:"„Åò„Åã„Çì „Çí „Åõ„Å§„ÇÑ„Åè „Åô„Çã „Åü„ÇÅ „Å´ „Å™„Å´ „Çí „ÇÑ„ÇÅ „Åæ„Åô „Åã", stripes:[ "#5ee6ff","#8aff80","#fff680" ]},
  {en:"Are you going to join a club this semester?", jp:"‰ªäÂ≠¶Êúü„ÅØ„ÇØ„É©„Éñ„Å´ÂÖ•„Çä„Åæ„Åô„Åã„ÄÇ", hira:"„Åì„Çì„Åå„Å£„Åç „ÅØ „Åè„Çâ„Å∂ „Å´ „ÅØ„ÅÑ „Çä„Åæ„Åô „Åã", stripes:[ "#ff7eb9","#5ee6ff","#c77dff" ]},
  {en:"What will you do if you make a mistake?", jp:"„ÇÇ„ÅóÈñìÈÅï„Åà„Åü„Çâ„Å©„ÅÜ„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„ÇÇ„Åó „Åæ„Å°„Åå„Åà „Åü„Çâ „Å©„ÅÜ „Åó„Åæ„Åô „Åã", stripes:[ "#8aff80","#fff680","#5ee6ff" ]},
  {en:"Who are you meeting to plan your goals?", jp:"ÁõÆÊ®ô„ÇíË®àÁîª„Åô„Çã„Åü„ÇÅ„Å´Ë™∞„Å®‰ºö„ÅÑ„Åæ„Åô„Åã„ÄÇ", hira:"„ÇÇ„Åè„Å≤„Çá„ÅÜ „Çí „Åë„ÅÑ„Åã„Åè „Åô„Çã „Åü„ÇÅ „Å´ „Å†„Çå „Å® „ÅÇ„ÅÑ „Åæ„Åô „Åã", stripes:[ "#5ee6ff","#c77dff","#fff680" ]},
  {en:"When are you going to start your routine?", jp:"„ÅÑ„Å§Êó•Ë™≤„ÇíÂßã„ÇÅ„Åæ„Åô„Åã„ÄÇ", hira:"„ÅÑ„Å§ „Å´„Å£„Åã „Çí „ÅØ„Åò„ÇÅ „Åæ„Åô „Åã", stripes:[ "#fff680","#5ee6ff","#8aff80" ]},
  {en:"What will you do better than last year?", jp:"ÂéªÂπ¥„Çà„Çä‰Ωï„Çí„ÇÇ„Å£„Å®‰∏äÊâã„Å´„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åç„Çá„Å≠„Çì „Çà„Çä „Å™„Å´ „Çí „ÇÇ„Å£„Å® „Åò„Çá„ÅÜ„Åö „Å´ „Åó„Åæ„Åô „Åã", stripes:[ "#5ee6ff","#ff7eb9","#8aff80" ]},
  {en:"How will you reward yourself?", jp:"„Å©„ÅÜ„ÇÑ„Å£„Å¶Ëá™ÂàÜ„Å´„Åî„Åª„ÅÜ„Å≥„Çí„ÅÇ„Åí„Åæ„Åô„Åã„ÄÇ", hira:"„Å©„ÅÜ„ÇÑ„Å£„Å¶ „Åò„Å∂„Çì „Å´ „Åî„Åª„ÅÜ„Å≥ „Çí „ÅÇ„Åí „Åæ„Åô „Åã", stripes:[ "#c77dff","#5ee6ff","#fff680" ]},
  {en:"What are you not going to do this year?", jp:"‰ªäÂπ¥„ÅØ‰Ωï„Çí„Åó„Å™„ÅÑ„Å§„ÇÇ„Çä„Åß„Åô„Åã„ÄÇ", hira:"„Åì„Å®„Åó „ÅØ „Å™„Å´ „Çí „Åó„Å™„ÅÑ „Å§„ÇÇ„Çä „Åß„Åô „Åã", stripes:[ "#8aff80","#5ee6ff","#fff680" ]},
  {en:"How will you track your progress?", jp:"ÈÄ≤Ê≠©„Çí„Å©„ÅÜ„ÇÑ„Å£„Å¶Ë®òÈå≤„Åó„Åæ„Åô„Åã„ÄÇ", hira:"„Åó„Çì„ÅΩ „Çí „Å©„ÅÜ„ÇÑ„Å£„Å¶ „Åç„Çç„Åè „Åó„Åæ„Åô „Åã", stripes:[ "#fff680","#8aff80","#5ee6ff" ]},
  {en:"Which habit will be the hardest to keep?", jp:"„Å©„ÅÆÁøíÊÖ£„Åå‰∏ÄÁï™Á∂ö„Åë„Å´„Åè„ÅÑ„Åß„Åô„Åã„ÄÇ", hira:"„Å©„ÅÆ „Åó„ÇÖ„ÅÜ„Åã„Çì „Åå „ÅÑ„Å°„Å∞„Çì „Å§„Å•„Åë „Å´„Åè„ÅÑ „Åß„Åô „Åã", stripes:[ "#ff7eb9","#5ee6ff","#8aff80" ]},
  {en:"What will you learn first?", jp:"ÊúÄÂàù„Å´‰Ωï„ÇíÂ≠¶„Å≥„Åæ„Åô„Åã„ÄÇ", hira:"„Åï„ÅÑ„Åó„Çá „Å´ „Å™„Å´ „Çí „Åæ„Å™„Å≥ „Åæ„Åô „Åã", stripes:[ "#5ee6ff","#fff680","#c77dff" ]}
];

const QUIZ = [
  {q:"I ___ write my goals tonight.", opts:["am going","am going to","will","going to"], a:2, ex:"Decision at the moment ‚Üí will."},
  {q:"She is ___ start a diary next week.", opts:["going to","will to","go to","going"], a:0, ex:"Planned intention ‚Üí going to + base."},
  {q:"We ___ late anymore.", opts:["won't be","aren't be","don't be","not be"], a:0, ex:"Negative future of be ‚Üí won't be."},
  {q:"What are you ___ this weekend?", opts:["do","doing","did","done"], a:1, ex:"Present continuous for near-future plan."},
  {q:"By March, I ___ five books.", opts:["will read","am read","will have read","have read"], a:2, ex:"Future perfect."},
  {q:"He ___ to join the basketball club.", opts:["will","is going","is going to","going"], a:2, ex:"is going to + verb."},
  {q:"I think she ___ enjoy the class.", opts:["is going to","going","am going to","are going"], a:0, ex:"Prediction ‚Üí going to (will also OK)."},
  {q:"I promise I ___ my best.", opts:["will do","am doing","going to do","do"], a:0, ex:"Promises ‚Üí will."},
  {q:"What time ___ you start your new routine?", opts:["are","do","will","did"], a:2, ex:"Future question ‚Üí will."},
  {q:"He ___ coffee every morning.", opts:["will drink","drinks","is drinking","going to drink"], a:1, ex:"Habit ‚Üí simple present."},
  {q:"I ___ help you after school.", opts:["am going to","go to","am going","be going"], a:0, ex:"Intention already decided."},
  {q:"They ___ a mistake if they rush.", opts:["will make","are making","make","going to make"], a:0, ex:"Future result ‚Üí will."},
  {q:"Where ___ you study today?", opts:["are","do","will","is"], a:2, ex:"Future plan question ‚Üí will."},
  {q:"She ___ late because she set an alarm.", opts:["won't be","isn't being","doesn't be","isn't"], a:0, ex:"Future negative of be."},
  {q:"I ___ a good habit this month.", opts:["start","am starting","will starting","to start"], a:1, ex:"Present continuous for planned future."},
  {q:"If I have time, I ___ read more.", opts:["am going to","will","going","am"], a:1, ex:"Conditional ‚Üí will."},
  {q:"We ___ our goals on Sunday.", opts:["discuss","are going to discuss","will discussing","going to discuss"], a:1, ex:"going to + base."},
  {q:"___ you join any club this year?", opts:["Do","Did","Will","Are"], a:2, ex:"Will you‚Ä¶?"},
  {q:"I‚Äôm not sure, but I ___ start running.", opts:["will","am","am going to","might"], a:3, ex:"Modal of possibility."},
  {q:"By the end of the week, she ___ her desk.", opts:["will tidy","will have tidied","is tidying","has tidy"], a:1, ex:"Future perfect."}
];

// ---------- STATE + EL ----------
let MODE = "vocab"; // vocab | sentences | questions | quiz
let idx = 0, flipped = false, score = 0, qIndex = 0, firstAttempt = true, gotIt = false;
const card = document.getElementById('card');
const frontTitle = document.getElementById('frontTitle');
const frontSub = document.getElementById('frontSub');
const backTitle = document.getElementById('backTitle');
const backSub = document.getElementById('backSub');

const cardsStage = document.getElementById('cardsStage');
const quizStage  = document.getElementById('quizStage');
const qprog = document.getElementById('qprog');
const scoreEl = document.getElementById('score');
const qtext = document.getElementById('qtext');
const opts = document.getElementById('opts');
const explain = document.getElementById('explain');
const modesBar = document.getElementById('modes');

// ---------- HELPERS ----------
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

// build the modes bar in a RANDOM order each visit
function buildModes(){
  const defs = [
    {num:1, mode:'vocab',     label:'‚ë† Vocabulary Ë™ûÂΩô (20)'},
    {num:2, mode:'sentences', label:'‚ë° Sentences Êñá (20)'},
    {num:3, mode:'questions', label:'‚ë¢ Questions Ë≥™Âïè (20)'},
    {num:4, mode:'quiz',      label:'‚ë£ Quiz „ÇØ„Ç§„Ç∫ (20)'}
  ];
  const order = shuffle(defs); // << random every load
  modesBar.innerHTML = '';
  order.forEach((d, k)=>{
    const b = document.createElement('button');
    b.className = 'tab';
    b.dataset.mode = d.mode;
    b.dataset.num = String(d.num);          // for color mapping
    b.dataset.ord = String(k+1);            // position (not used for color)
    b.textContent = d.label;
    b.addEventListener('click',()=>setMode(d.mode, b));
    modesBar.appendChild(b);
  });
  // default to first in randomized order
  setMode(order[0].mode, modesBar.firstElementChild);
}

// ---------- RENDER ----------
function activeList(){
  if (MODE==="vocab") return VOCAB;
  if (MODE==="sentences") return SENTENCES;
  if (MODE==="questions") return QUESTIONS;
  return [];
}
function renderCard(){
  const list = activeList();
  const item = list[idx];
  card.style.backgroundImage = stripes(item.stripes[0], item.stripes[1], item.stripes[2]);
  frontTitle.textContent = item.en;
  frontSub.textContent   = "";
  backTitle.textContent  = item.jp;
  backSub.textContent    = `(${item.hira})`;
  card.classList.toggle('is-back', flipped);
}
function setMode(m, btnEl){
  document.querySelectorAll('.modes button').forEach(b=>b.classList.remove('active'));
  if (btnEl) btnEl.classList.add('active');

  MODE = m; idx = 0; flipped = false;
  if (MODE==="quiz"){
    cardsStage.classList.add('hidden');
    quizStage.classList.remove('hidden');
    startQuiz();
  } else {
    quizStage.classList.add('hidden');
    cardsStage.classList.remove('hidden');
    renderCard();
  }
}

// ---------- QUIZ FLOW (first-try-only scoring + shuffled order) ----------
let QUIZ_RUN = [];

function startQuiz(){
  QUIZ_RUN = shuffle(QUIZ);   // üëà Shuffle questions each time
  score = 0;
  qIndex = 0;
  scoreEl.textContent = `Score: ${score}`;
  showQ();
}

function showQ(){
  firstAttempt = true;
  gotIt = false;
  const item = QUIZ_RUN[qIndex];                         // use shuffled list
  qprog.textContent = `${qIndex+1} / ${QUIZ_RUN.length}`; // update counter
  qtext.textContent = item.q;
  opts.innerHTML = "";
  explain.textContent = "";

  item.opts.forEach((t,i)=>{
    const b = document.createElement('button');
    b.className = 'opt';
    b.textContent = t;
    b.addEventListener('click', ()=>{
      if (gotIt) return;
      const correct = i===item.a;
      if (correct){
        b.classList.add('correct');
        burstConfettiFrom(b);
        gotIt = true;
        // ‚úÖ Only give point if it was correct on the first try
        if (firstAttempt){ 
          score++; 
          scoreEl.textContent = `Score: ${score}`; 
        }
        // Lock other buttons
        [...opts.children].forEach(btn=>btn.disabled=true);
        explain.textContent = item.ex;
      } else {
        b.classList.add('wrong');
        firstAttempt = false; // ‚ùå future correct answers = 0 points
      }
    });
    opts.appendChild(b);
  });
}

document.getElementById('nextQ').addEventListener('click', ()=>{
  if (qIndex < QUIZ_RUN.length-1){ 
    qIndex++; 
    showQ(); 
  } else {
    qtext.textContent = "Finished! Great job.";
    opts.innerHTML = "";
    explain.innerHTML = `Your final score is <b>${score}</b> / ${QUIZ_RUN.length}.`;
  }
});

// ---------- UI EVENTS ----------
document.getElementById('flipBtn').addEventListener('click', ()=>{flipped=!flipped;renderCard()});
document.getElementById('nextBtn').addEventListener('click', ()=>{
  const list = activeList(); idx = (idx+1) % list.length; flipped=false; renderCard();
});
document.getElementById('prevBtn').addEventListener('click', ()=>{
  const list = activeList(); idx = (idx-1+list.length) % list.length; flipped=false; renderCard();
});

// init: build randomized modes and start
buildModes();

</script>
</body>
</html>
